---
import Card from "@components/base/Card.astro";
import { t, getCurrentLocale } from '@utils/i18n';
const currentLocale = getCurrentLocale(Astro.url);
---

<div class="grid md:grid-cols-3 ltablet:grid-cols-3 lg:grid-cols-3 gap-x-6 ptablet:gap-x-4 gap-y-16 pt-10" x-data="{ activeCategory: 'all', activeRating: 'all', activeApplication: 'all', showModal: false, modalImage: '', modalAlt: '' }">
  <!-- Otomotif Products -->
  <div x-show="(activeCategory === 'all' || activeCategory === 'otomotif') && (activeRating === 'all' || (activeRating === '4.5+' && 4.8 >= 4.5) || (activeRating === '4.8+' && 4.8 >= 4.8)) && (activeApplication === 'all' || activeApplication === 'parking')" data-category="otomotif" data-rating="4.8" data-application="parking">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/oto-carstopper.png?updatedAt=1754229259415"
          alt={t(currentLocale, 'content.products.grid.products.car_stopper.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/oto-carstopper.png?updatedAt=1754229259415'; modalAlt = '${t(currentLocale, 'content.products.grid.products.car_stopper.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.car_stopper.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.otomotif')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.car_stopper.description')}
        </p>
      </div>
     
    </Card>
  </div>

  <div x-show="(activeCategory === 'all' || activeCategory === 'otomotif') && (activeRating === 'all' || (activeRating === '4.5+' && 4.9 >= 4.5) || (activeRating === '4.8+' && 4.9 >= 4.8)) && (activeApplication === 'all' || activeApplication === 'parking')" data-category="otomotif" data-rating="4.9" data-application="parking">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/oto-tirestopper.png?updatedAt=1754229260046"
          alt={t(currentLocale, 'content.products.grid.products.tire_stopper.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/oto-tirestopper.png?updatedAt=1754229260046'; modalAlt = '${t(currentLocale, 'content.products.grid.products.tire_stopper.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.tire_stopper.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.otomotif')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.tire_stopper.description')}
        </p>
      </div>
    </Card>
  </div>

  <div x-show="activeCategory === 'all' || activeCategory === 'otomotif'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/oto-speedbump.png?updatedAt=1754229249845"
          alt={t(currentLocale, 'content.products.grid.products.speed_bump.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/oto-speedbump.png?updatedAt=1754229249845'; modalAlt = '${t(currentLocale, 'content.products.grid.products.speed_bump.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.speed_bump.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.otomotif')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.speed_bump.description')}
        </p>
      </div>
    </Card>
  </div>

  <div x-show="activeCategory === 'all' || activeCategory === 'otomotif'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/oto-connectingrod.png?updatedAt=1754229258162"
          alt={t(currentLocale, 'content.products.grid.products.connecting_rod.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/oto-connectingrod.png?updatedAt=1754229258162'; modalAlt = '${t(currentLocale, 'content.products.grid.products.connecting_rod.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.connecting_rod.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.otomotif')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.connecting_rod.description')}
        </p>
      </div>
    </Card>
  </div>

  <div x-show="activeCategory === 'all' || activeCategory === 'otomotif'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/oto-stepfloor.jpg?updatedAt=1754229203326"
          alt={t(currentLocale, 'content.products.grid.products.rubber_step_floor.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/oto-stepfloor.jpg?updatedAt=1754229203326'; modalAlt = '${t(currentLocale, 'content.products.grid.products.rubber_step_floor.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.rubber_step_floor.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.otomotif')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.rubber_step_floor.description')}
        </p>
      </div>
    </Card>
  </div>

  <div x-show="activeCategory === 'all' || activeCategory === 'otomotif'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/oto-dumper.png?updatedAt=1754229256462"
          alt={t(currentLocale, 'content.products.grid.products.dumper_components.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/oto-dumper.png?updatedAt=1754229256462'; modalAlt = '${t(currentLocale, 'content.products.grid.products.dumper_components.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.dumper_components.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.otomotif')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.dumper_components.description')}
        </p>
      </div>
    </Card>
  </div>

  <!-- Railway Products -->
  <div x-show="activeCategory === 'all' || activeCategory === 'railway'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/railway-duct.png?updatedAt=1754229262271"
          alt={t(currentLocale, 'content.products.grid.products.railway_duct.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/railway-duct.png?updatedAt=1754229262271'; modalAlt = '${t(currentLocale, 'content.products.grid.products.railway_duct.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.railway_duct.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.railway')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.railway_duct.description')}
        </p>
      </div>
    </Card>
  </div>

  <div x-show="activeCategory === 'all' || activeCategory === 'railway'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/railway-connecting.png?updatedAt=1754229263760"
          alt={t(currentLocale, 'content.products.grid.products.railway_connecting.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/railway-connecting.png?updatedAt=1754229263760'; modalAlt = '${t(currentLocale, 'content.products.grid.products.railway_connecting.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.railway_connecting.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.railway')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.railway_connecting.description')}
        </p>
      </div>
    </Card>
  </div>

  <!-- Industrial Products -->
  <div x-show="activeCategory === 'all' || activeCategory === 'industrial'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/industrial-oring.png?updatedAt=1754229242843"
          alt={t(currentLocale, 'content.products.grid.products.silicon_oring.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/industrial-oring.png?updatedAt=1754229242843'; modalAlt = '${t(currentLocale, 'content.products.grid.products.silicon_oring.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.silicon_oring.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.industrial')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.silicon_oring.description')}
        </p>
      </div>
    </Card>
  </div>

  <div x-show="activeCategory === 'all' || activeCategory === 'industrial'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/industrial-nbrfloat.png?updatedAt=1754229249698"
          alt={t(currentLocale, 'content.products.grid.products.nbr_float.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/industrial-nbrfloat.png?updatedAt=1754229249698'; modalAlt = '${t(currentLocale, 'content.products.grid.products.nbr_float.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.nbr_float.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.industrial')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.nbr_float.description')}
        </p>
      </div>
    </Card>
  </div>

  <div x-show="activeCategory === 'all' || activeCategory === 'industrial'">
    <Card class="'p-4'">
      <div
        class="relative w-full h-40 rounded-lg overflow-hidden"
      >
        <img
          class="w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity duration-300"
          src="https://ik.imagekit.io/gawwe/sonamoo/industrial-siliconseal.png?updatedAt=1754229260204"
          alt={t(currentLocale, 'content.products.grid.products.electronic_components.title')}
          @click={`showModal = true; modalImage = 'https://ik.imagekit.io/gawwe/sonamoo/industrial-siliconseal.png?updatedAt=1754229260204'; modalAlt = '${t(currentLocale, 'content.products.grid.products.electronic_components.title')}'`}
        />
      </div>
      <div class="font-sans mt-3">
        <h4 class="font-semibold text-muted-800 ">
          {t(currentLocale, 'content.products.grid.products.electronic_components.title')}
        </h4>
        <p class="text-sm text-muted-400">{t(currentLocale, 'content.products.grid.categories.industrial')}</p>
      </div>
      <div class="mt-2">
        <p class="text-sm ptablet:text-xs text-muted-500 ">
          {t(currentLocale, 'content.products.grid.products.electronic_components.description')}
        </p>
      </div>
    </Card>
  </div>

  <!-- Image Modal -->
  <div 
    x-show="showModal" 
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4"
    @click="showModal = false"
    @keydown.escape.window="showModal = false"
  >
    <div 
      class="relative max-w-4xl max-h-full"
      @click.stop
    >
      <!-- Close Button -->
      <button
        @click="showModal = false"
        class="absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors duration-200 z-10"
      >
        <iconify-icon class="iconify w-8 h-8" icon="ph:x-bold"></iconify-icon>
      </button>
      
      <!-- Image -->
      <img
        :src="modalImage"
        :alt="modalAlt"
        class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"
        loading="lazy"
      />
      
      <!-- Image Title -->
      <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-4 rounded-b-lg">
        <h3 class="text-lg font-semibold" x-text="modalAlt"></h3>
      </div>
    </div>
  </div>
</div>